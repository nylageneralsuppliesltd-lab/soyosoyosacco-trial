<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msvalidate.01" content="858002EEAD3486E0F9BDC0652A4071B4" />
    <title>Soyosoyo SACCO | Affordable Loans & Savings in Coastal Kenya</title>
    <meta name="description" content="Join Soyosoyo SACCO for 1% monthly loans, high dividends, and financial empowerment. Emergency, education, and development loans available in Mombasa, Kilifi, Kwale.">
    <meta name="keywords" content="SACCO Kenya, loans Mombasa, savings cooperative, emergency loan, education loan, Soyosoyo SACCO">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Soyosoyo SACCO | Affordable Loans & Savings in Coastal Kenya">
    <meta property="og:description" content="Join Soyosoyo SACCO for 1% monthly loans, high dividends, and financial empowerment. Emergency, education, and development loans in Coastal Kenya.">
    <meta property="og:image" content="https://soyosoyosacco.com/assets/141dd3faa98da9737b591161deac509a.jpg">
    <meta property="og:url" content="https://soyosoyosacco.com/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Soyosoyo SACCO | Affordable Loans & Savings">
    <meta name="twitter:description" content="1% monthly loans in Coastal Kenya. Join with KSh 200!">
    <meta name="twitter:image" content="https://soyosoyosacco.com/assets/141dd3faa98da9737b591161deac509a.jpg">
    <link rel="canonical" href="https://soyosoyosacco.com/">
    <link rel="icon" href="./assets/141dd3faa98da9737b591161deac509a.jpg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- CSS v54 -->
    <link rel="stylesheet" href="./style.css?v=54">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-05M38MYK0G"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-05M38MYK0G');
    </script>

    <!-- GROWTH INDICATOR STYLES -->
    <style>
        .growth-indicator {
            text-align: center;
            margin-top: 0.5rem;
            font-weight: bold;
            font-size: 1rem;
        }
        .growth-indicator.positive { color: #10B981; }
        .growth-indicator.negative { color: #EF4444; }
        .growth-indicator i { margin-right: 4px; font-size: 0.9em; }
    </style>
</head>
<body>

<!-- ==================== HEADER ==================== -->
<header class="site-header">
    <div class="navbar">
        <a href="index.html">
            <img class="brand-logo round" src="./assets/141dd3faa98da9737b591161deac509a.jpg" alt="Soyosoyo Sacco Logo">
        </a>
        <a href="https://chamasoft.com/login" class="member-portal">Member Portal</a>
        <button id="menu-toggle" aria-label="Toggle Menu"></button>
        <nav class="nav-links">
            <a href="index.html">Home</a>
            <a href="Products.html">Products</a>
            <a href="Online-Forms.html">Online Forms</a>
            <a href="Jobs.html">Jobs</a>
            <a href="About.html">About</a>
            <a href="Join-Us.html">Join Us</a>
        </nav>
    </div>

    <!-- HERO -->
    <div class="hero">
        <div class="banner-text">
            <h1>Soyosoyo SACCO</h1>
            <p>Empowering Coastal Kenya with 1% Loans & High Dividends</p>
        </div>
    </div>
</header>

<!-- ==================== MAIN ==================== -->
<main class="container">
    <!-- (Your other content remains unchanged) -->

    <!-- GROWTH CHARTS -->
    <section class="section">
        <h2 style="text-align: center; margin-bottom: 1.5rem;">Growth Since January 2025</h2>
        <div class="growth-charts-grid">
            <div class="chart-card">
                <canvas id="chartMembers"></canvas>
                <p>Total Members</p>
                <div id="growthMembers" class="growth-indicator"></div>
            </div>
            <div class="chart-card">
                <canvas id="chartLoans"></canvas>
                <p>Loans Disbursed</p>
                <div id="growthLoans" class="growth-indicator"></div>
            </div>
            <div class="chart-card">
                <canvas id="chartContributions"></canvas>
                <p>Contributions</p>
                <div id="growthContributions" class="growth-indicator"></div>
            </div>
            <div class="chart-card">
                <canvas id="chartProfit"></canvas>
                <p>Profit</p>
                <div id="growthProfit" class="growth-indicator"></div>
            </div>
            <div class="chart-card">
                <canvas id="chartROA"></canvas>
                <p>Return on Assets (ROA)</p>
                <div id="growthROA" class="growth-indicator"></div>
            </div>
            <div class="chart-card">
                <canvas id="chartLiquidity"></canvas>
                <p>Liquidity Ratio</p>
                <div id="growthLiquidity" class="growth-indicator"></div>
            </div>
        </div>
    </section>
</main>

<!-- ==================== FOOTER ==================== -->
<footer>
    <p>© 2025 SOYOSOYO SACCO. All rights reserved. | <a href="mailto:info@soyosoyosacco.com">info@soyosoyosacco.com</a></p>
    <div class="social-icons">
        <a href="https://www.facebook.com/people/Soyosoyo-Sacco/61565783836766/" target="_blank">Facebook</a>
        <a href="https://x.com/SoyosoyoSACCO" target="_blank">Twitter</a>
        <a href="https://www.instagram.com/soyosoyosacco" target="_blank">Instagram</a>
    </div>
</footer>

<!-- ==================== SCRIPTS ==================== -->
<script src="./scripts/carousel.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

<script>
    // CLEAN GROWTH ARROW PLUGIN
    const cleanGrowthArrowPlugin = {
        id: 'cleanGrowthArrow',
        afterDraw: function(chart) {
            const { ctx, scales, data } = chart;
            const dataset = data.datasets[0];
            const janVal = dataset.data[0];
            const todayVal = dataset.data[1];
            const growthPercent = janVal === 0 ? 0 : ((todayVal - janVal) / Math.abs(janVal)) * 100;
            const isPositive = growthPercent > 0;

            const xScale = scales.x;
            const yScale = scales.y;

            const x1 = xScale.getPixelForValue(0);
            const x2 = xScale.getPixelForValue(1);
            const y1 = yScale.getPixelForValue(janVal);
            const y2 = yScale.getPixelForValue(todayVal);

            const headLength = 14;
            const angle = Math.atan2(y2 - y1, x2 - x1);

            const color = isPositive ? '#10B981' : '#EF4444';

            ctx.save();
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(x2, y2);
            ctx.lineTo(x2 - headLength * Math.cos(angle - Math.PI / 6), y2 - headLength * Math.sin(angle - Math.PI / 6));
            ctx.lineTo(x2 - headLength * Math.cos(angle + Math.PI / 6), y2 - headLength * Math.sin(angle + Math.PI / 6));
            ctx.closePath();
            ctx.fillStyle = color;
            ctx.fill();

            if (growthPercent !== 0) {
                const midX = (x1 + x2) / 2;
                const midY = (y1 + y2) / 2 - 15;
                ctx.font = 'bold 13px Lato';
                ctx.fillStyle = color;
                ctx.textAlign = 'center';
                ctx.fillText(`${isPositive ? '+' : ''}${growthPercent.toFixed(1)}%`, midX, midY);
            }
            ctx.restore();
        }
    };
    Chart.register(cleanGrowthArrowPlugin);

    // CHART RENDERER
    function renderGrowthCharts() {
        if (!window.saccoData) {
            console.warn('saccoData not ready. Retrying...');
            setTimeout(renderGrowthCharts, 100);
            return;
        }

        const { jan, today } = window.saccoData;
        const colors = {
            members: { jan: '#8B5CF6', today: '#C4B5FD' },
            loans: { jan: '#F59E0B', today: '#FBBF24' },
            contributions: { jan: '#10B981', today: '#34D399' },
            profit: { jan: '#EF4444', today: '#F87171' },
            roa: { jan: '#0EA5E9', today: '#7DD3FC' },
            liquidity: { jan: '#6366F1', today: '#A5B4FC' }
        };

        const growth = (j, t) => j === 0 ? (t === 0 ? 0 : 100) : ((t - j) / Math.abs(j)) * 100;

        const updateIndicator = (id, g) => {
            const el = document.getElementById(id);
            const arrow = g > 0 ? 'up' : g < 0 ? 'down' : 'right';
            const cls = g > 0 ? 'positive' : g < 0 ? 'negative' : '';
            el.innerHTML = `<i class="fas fa-arrow-${arrow}"></i> ${Math.abs(g).toFixed(1)}%`;
            el.className = `growth-indicator ${cls}`;
        };

        const createChart = (id, j, t, label, color, gid, isPercent = false, isMoney = false) => {
            const g = growth(j, t);
            updateIndicator(gid, g);

            new Chart(document.getElementById(id).getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['Jan 2025', 'Today'],
                    datasets: [{
                        data: [j, t],
                        backgroundColor: [color.jan, color.today],
                        borderRadius: 10,
                        maxBarThickness: 60
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: { 
                                label: ctx => {
                                    const val = ctx.raw;
                                    if (isPercent) return val.toFixed(2) + '%'; // ✅ fixed
                                    if (isMoney) return 'KES ' + val.toLocaleString();
                                    return val.toLocaleString();
                                }
                            }
                        },
                        datalabels: {
                            anchor: 'end',
                            align: 'top',
                            color: '#1a1a1a',
                            font: { weight: '900', size: 14 },
                            formatter: v => {
                                if (isPercent) return v.toFixed(2) + '%'; // ✅ fixed
                                if (isMoney) return 'KES ' + v.toLocaleString();
                                return v.toLocaleString();
                            },
                            backgroundColor: 'rgba(255, 255, 255, 0.95)',
                            borderRadius: 6,
                            padding: 7
                        }
                    },
                    scales: {
                        x: { grid: { display: false }, ticks: { color: '#1a1a1a', font: { weight: 'bold', size: 13 } } },
                        y: { display: false, beginAtZero: true }
                    },
                    layout: { padding: { top: 50, left: 8, right: 8 } }
                },
                plugins: [ChartDataLabels]
            });
        };

        // ROA and Liquidity calculations
        const janROA = jan.contributions > 0 ? (jan.profit / jan.contributions) * 100 : 0;
        const todayROA = today.contributions > 0 ? (today.profit / today.contributions) * 100 : 0;

        const janLiquidity = jan.contributions > 0 ? (jan.bankBalance / jan.contributions) * 100 : 0;
        const todayLiquidity = today.contributions > 0 ? (today.bankBalance / today.contributions) * 100 : 0;

        // Create charts
        createChart('chartMembers', jan.members, today.members, 'Members', colors.members, 'growthMembers');
        createChart('chartLoans', jan.loans, today.loans, 'Loans (KES)', colors.loans, 'growthLoans', false, true);
        createChart('chartContributions', jan.contributions, today.contributions, 'Contributions (KES)', colors.contributions, 'growthContributions', false, true);
        createChart('chartProfit', jan.profit, today.profit, 'Profit (KES)', colors.profit, 'growthProfit', false, true);
        createChart('chartROA', janROA, todayROA, 'ROA (%)', colors.roa, 'growthROA', true);
        createChart('chartLiquidity', janLiquidity, todayLiquidity, 'Liquidity Ratio (%)', colors.liquidity, 'growthLiquidity', true);
    }

    document.addEventListener('DOMContentLoaded', () => {
        renderGrowthCharts();
        if (typeof updateFields === 'function') updateFields();
        if (typeof updateSliderValue === 'function') updateSliderValue('principal');
    });
</script>

<script src="./scripts/main.js"></script>
<script src="./scripts/calculator.js"></script>
<script src="./scripts/dividendscalculator.js"></script>
<script src="./scripts/chatbot.js"></script>
<script src="./scripts/seo.js"></script>

<!-- SCHEMA.ORG -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FinancialService",
  "name": "SOYOSOYO SACCO",
  "url": "https://soyosoyosacco.com",
  "logo": "https://soyosoyosacco.com/assets/141dd3faa98da9737b591161deac509a.jpg",
  "description": "Affordable 1% monthly loans and high dividends in Coastal Kenya.",
  "address": { "@type": "PostalAddress", "addressLocality": "Kilifi", "addressRegion": "Coast", "addressCountry": "KE" },
  "email": "info@soyosoyosacco.com",
  "areaServed": ["Kilifi", "Mombasa", "Kwale"]
}
</script>
</body>
</html>
