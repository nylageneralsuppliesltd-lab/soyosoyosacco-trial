<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msvalidate.01" content="858002EEAD3486E0F9BDC0652A4071B4" />
    <title>Soyosoyo SACCO | Affordable Loans & Savings in Coastal Kenya</title>
    <meta name="description" content="Join Soyosoyo SACCO for 1% monthly loans, high dividends, and financial empowerment. Emergency, education, and development loans available in Mombasa, Kilifi, Kwale.">
    <meta name="keywords" content="SACCO Kenya, loans Mombasa, savings cooperative, emergency loan, education loan, Soyosoyo SACCO">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Soyosoyo SACCO | Affordable Loans & Savings in Coastal Kenya">
    <meta property="og:description" content="Join Soyosoyo SACCO for 1% monthly loans, high dividends, and financial empowerment. Emergency, education, and development loans in Coastal Kenya.">
    <meta property="og:image" content="https://soyosoyosacco.com/assets/141dd3faa98da9737b591161deac509a.jpg">
    <meta property="og:url" content="https://soyosoyosacco.com/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Soyosoyo SACCO | Affordable Loans & Savings">
    <meta name="twitter:description" content="1% monthly loans in Coastal Kenya. Join with KSh 200!">
    <meta name="twitter:image" content="https://soyosoyosacco.com/assets/141dd3faa98da9737b591161deac509a.jpg">
    <link rel="canonical" href="https://soyosoyosacco.com/">
    <link rel="icon" href="./assets/141dd3faa98da9737b591161deac509a.jpg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- CSS v56 -->
    <link rel="stylesheet" href="./style.css?v=56">

    <!-- Plotly.js Library (Free 3D Charts) -->
<script src="https://cdn.plot.ly/plotly-2.35.2.min.js" charset="utf-8"></script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-05M38MYK0G"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-05M38MYK0G');
    </script>

    <!-- Premium 3D Projections Styles -->
<style>
    .projections-premium-section {
        max-width: 1400px;
        margin: 60px auto;
        padding: 50px 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        border-radius: 24px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        position: relative;
        overflow: hidden;
    }
    
    .projections-premium-section::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
        background-size: 30px 30px;
        animation: floatBg 20s linear infinite;
        pointer-events: none;
    }
    
    @keyframes floatBg {
        0% { transform: translate(0, 0); }
        100% { transform: translate(30px, 30px); }
    }
    
    .projections-premium-header {
        text-align: center;
        margin-bottom: 40px;
        position: relative;
        z-index: 1;
    }
    
    .projections-premium-header h2 {
        font-size: 42px;
        color: #ffffff;
        margin: 0 0 15px 0;
        font-weight: 800;
        text-shadow: 0 4px 20px rgba(0,0,0,0.3);
        background: linear-gradient(135deg, #fff 0%, #ffd700 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .projections-premium-header p {
        color: #ffffff;
        font-size: 18px;
        margin: 0;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        opacity: 0.95;
    }
    
    .chart-premium-container {
        background: rgba(255,255,255,0.95);
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        margin-bottom: 40px;
        position: relative;
        z-index: 1;
    }
    
    #premium3DChart {
        width: 100%;
        height: 700px;
    }
    
    .metrics-premium-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 25px;
        margin-top: 40px;
        position: relative;
        z-index: 1;
    }
    
    .metric-premium-card {
        background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 100%);
        padding: 30px;
        border-radius: 18px;
        box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        overflow: hidden;
    }
    
    .metric-premium-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 6px;
        background: linear-gradient(90deg, var(--card-color-1), var(--card-color-2));
    }
    
    .metric-premium-card:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 15px 50px rgba(0,0,0,0.25);
    }
    
    .metric-premium-card h4 {
        margin: 0 0 20px 0;
        font-size: 16px;
        font-weight: 700;
        color: #333;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .metric-value-premium {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
        padding: 8px 0;
        border-bottom: 1px solid #f0f0f0;
    }
    
    .metric-label-premium {
        font-size: 13px;
        color: #666;
        font-weight: 500;
    }
    
    .metric-number-premium {
        font-size: 20px;
        font-weight: 700;
        background: linear-gradient(135deg, var(--card-color-1), var(--card-color-2));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .growth-badge-premium {
        background: linear-gradient(135deg, var(--card-color-1), var(--card-color-2));
        padding: 12px 20px;
        border-radius: 12px;
        text-align: center;
        margin-top: 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .growth-percentage-premium {
        color: #ffffff;
        font-weight: 800;
        font-size: 28px;
        text-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    
    .growth-text-premium {
        font-size: 11px;
        color: rgba(255,255,255,0.9);
        margin-top: 4px;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 600;
    }
    
    @media (max-width: 768px) {
        .projections-premium-section {
            margin: 30px 10px;
            padding: 30px 20px;
        }
        
        .projections-premium-header h2 {
            font-size: 28px;
        }
        
        #premium3DChart {
            height: 450px;
        }
        
        .metrics-premium-grid {
            grid-template-columns: 1fr;
            gap: 20px;
        }
    }
</style>


    <!-- GROWTH INDICATOR STYLES -->
    <style>
        .growth-indicator {
            text-align: center;
            margin-top: 0.5rem;
            font-weight: bold;
            font-size: 1rem;
        }
        .growth-indicator.positive { color: #10B981; }
        .growth-indicator.negative { color: #EF4444; }
        .growth-indicator i { margin-right: 4px; font-size: 0.9em; }
    </style>

    <!-- GROWTH CHARTS GRID STYLES -->
    <style>
        .growth-charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }
        .chart-card {
            position: relative;
            height: 300px;
            display: flex;
            flex-direction: column;
        }
        .chart-card canvas {
            flex-grow: 1;
            max-height: 250px;
        }
        .chart-card p {
            margin: 0.5rem 0 0 0;
            text-align: center;
            font-weight: bold;
        }
        @media (max-width: 768px) {
            .growth-charts-grid {
                grid-template-columns: 1fr;
            }
            .chart-card {
                height: 350px;
            }
            .chart-card canvas {
                max-height: 280px;
            }
        }
    </style>

    <!-- MEMBER ACTIVITIES CAROUSEL STYLES -->
    <style>
        .member-activities-section {
            margin-top: 3rem;
            padding: 2rem 0;
            background-color: #f8f9fa;
        }
        .member-activities-carousel {
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
            overflow: hidden;
            border-radius: 12px;
        }
        .member-activities-carousel .slides {
            display: flex;
            transition: transform 0.5s ease-in-out;
            height: 400px; /* Increased height to better show faces */
        }
        .member-activities-carousel .slide {
            min-width: 100%;
            height: 400px; /* Increased height to better show faces */
            flex-shrink: 0;
        }
        .member-activities-carousel .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .member-activities-carousel .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            font-size: 18px;
            z-index: 10;
        }
        .member-activities-carousel .prev { left: 10px; }
        .member-activities-carousel .next { right: 10px; }
        .member-activities-carousel .dots {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 1rem;
        }
        .member-activities-carousel .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ccc;
            cursor: pointer;
        }
        .member-activities-carousel .dot.active {
            background: #10B981;
        }
        @media (max-width: 768px) {
            .member-activities-carousel .slides,
            .member-activities-carousel .slide {
                height: 250px; /* Increased from 200px for mobile */
            }
        }
    </style>
</head>
<body>

<!-- ==================== HEADER ==================== -->
<header class="site-header">
    <div class="navbar">
        <a href="index.html">
            <img class="brand-logo round" src="./assets/141dd3faa98da9737b591161deac509a.jpg" alt="Soyosoyo Sacco Logo">
        </a>
        <a href="https://chamasoft.com/login" class="member-portal">Member Portal</a>
        <button id="menu-toggle" aria-label="Toggle Menu"></button>
        <nav class="nav-links">
            <a href="index.html">Home</a>
            <a href="Products.html">Products</a>
            <a href="Online-Forms.html">Online Forms</a>
            <a href="Jobs.html">Jobs</a>
            <a href="About.html">About</a>
            <a href="Join-Us.html">Join Us</a>
        </nav>
    </div>

    <!-- HERO -->
    <div class="hero">
        <div class="banner-text">
            <h1>Soyosoyo SACCO</h1>
            <p>Empowering Coastal Kenya with 1% Loans & High Dividends</p>
        </div>
    </div>
</header>

<!-- ==================== MAIN ==================== -->
<main class="container">

    <!-- HISTORY TEASER -->
    <section class="section">
        <h2 style="text-align: center; font-size: 1.6rem; margin-bottom: 1rem;">Our Journey</h2>
        <p style="text-align: center; max-width: 700px; margin: 0 auto 1.5rem;">
            Founded in 1998 as a medical aid cooperative, we‚Äôve evolved into a trusted financial partner for many in the Kenyan Coast.
        </p>
        <div style="text-align: center;">
            <a href="About.html" class="products-button" style="display: inline-block; padding: 0.75rem 2rem;">Read Full History</a>
        </div>
    </section>

    <!-- MISSION / VISION / CORE VALUES -->
    <div class="mission-vision-container">
        <img src="./assets/0065564ad0f92baf9be886b031073979.jpg" alt="Mission" class="round">
        <div>
            <h2>Our Mission</h2>
            <p>Empower members with accessible, affordable credit for healthcare, education, agriculture, growth and development.</p>
        </div>
    </div>

    <div class="mission-vision-container">
        <img src="./assets/d8c3d49708ed9831ff753b3548c717aa.jpg" alt="Vision" class="round">
        <div>
            <h2>Our Vision</h2>
            <p>To lead financial transformation and sustainable prosperity across Kenya.</p>
        </div>
    </div>

    <div class="core-values-container">
        <img src="./assets/8119c4ebd64ccbe641d0563d23444c34.jpg" alt="Core Values" class="round">
        <div>
            <h2>Core Values</h2>
            <ul>
                <li>Empowerment</li>
                <li>Integrity</li>
                <li>Community</li>
                <li>Accessibility</li>
                <li>Growth</li>
            </ul>
        </div>
    </div>

    <!-- LEADERSHIP -->
    <section class="section">
        <h2 style="text-align: center;">Leadership</h2>
        <div class="leadership-grid">
            <div class="leader-profile">
                <img src="./assets/judi.jpg" alt="Judith Malombo Mramba" class="round">
                <h3>Judith Malombo Mramba</h3>
                <p>Chairperson</p>
            </div>
            <div class="leader-profile">
                <img src="./assets/jere.jpg" alt="Jeremiah Kalama Lewa" class="round">
                <h3>Jeremiah Kalama Lewa</h3>
                <p>Vice-Chairperson</p>
            </div>
            <div class="leader-profile">
                <img src="./assets/sidi.jpg" alt="Sidi Saro Ngowa" class="round">
                <h3>Sidi Saro Ngowa</h3>
                <p>Secretary</p>
            </div>
            <div class="leader-profile">
                <img src="./assets/thoya.jpg" alt="Thomas Thoya Kitsao" class="round">
                <h3>Thomas Thoya Kitsao</h3>
                <p>Treasurer</p>
            </div>
        </div>
    </section>

    <!-- PRODUCTS PREVIEW -->
    <section class="section">
        <h2 style="text-align: center;">Featured Product</h2>
        <div class="products-grid">
            <div class="product-card">
                <img src="./assets/ba04cd4377b3746fc0750dcf2ff3d935.jpg" alt="Education Loan" class="round">
                <h2 style="text-align: center;">Education Loan</h2>
                <p>Cover tuition, books, and living costs. Up to 12 months at 4% per annum.</p>
                <a href="Products.html" class="products-button">Explore All Products</a>
            </div>
        </div>
    </section>

    <!-- FINANCIAL HIGHLIGHTS CAROUSEL -->
    <section class="section">
        <h2 style="text-align: center;">Financial Highlights</h2>
        <p style="text-align: center; margin-bottom: 1.5rem;">Our impact in numbers.</p>
        <div class="carousel-wrapper">
            <div class="carousel" aria-label="Financial Metrics Carousel"></div>
        </div>
    </section>

    <!-- GROWTH CHARTS -->
    <section class="section">
        <h2 style="text-align: center; margin-bottom: 1.5rem;">Growth Since January 2025</h2>
        <div class="growth-charts-grid">
            <div class="chart-card">
                <canvas id="chartMembers"></canvas>
                <p>Total Members</p>
                <div id="growthMembers" class="growth-indicator"></div>
            </div>
            <div class="chart-card">
                <canvas id="chartLoans"></canvas>
                <p>Loans Disbursed</p>
                <div id="growthLoans" class="growth-indicator"></div>
            </div>
            <div class="chart-card">
                <canvas id="chartLoanTypes"></canvas>
                <p>Loan Types Distribution (%)</p>
            </div>
            <div class="chart-card">
                <canvas id="chartContributions"></canvas>
                <p>Contributions</p>
                <div id="growthContributions" class="growth-indicator"></div>
            </div>
            <div class="chart-card">
                <canvas id="chartProfit"></canvas>
                <p>Profit</p>
                <div id="growthProfit" class="growth-indicator"></div>
            </div>
            <div class="chart-card">
                <canvas id="chartROA"></canvas>
                <p>Return on Assets (ROA)</p>
                <div id="growthROA" class="growth-indicator"></div>
            </div>
            <div class="chart-card">
                <canvas id="chartLiquidity"></canvas>
                <p>Liquidity Ratio</p>
                <div id="growthLiquidity" class="growth-indicator"></div>
            </div>
        </div>
    </section>
    
<!-- Projections Section HTML -->
<section class="projections-premium-section">
    <div class="projections-premium-header">
        <h2>5-Year Conservative Growth Forecast</h2>
        <p>Interactive 3D Funnel Visualization (2025-2029)</p>
    </div>
    
    <!-- 3D Funnel Chart -->
    <div class="chart-premium-container">
        <div id="premium3DChart"></div>
    </div>
    
    <!-- Premium Metrics Grid -->
    <div class="metrics-premium-grid" id="metricsPremiumGrid"></div>
</section>

    
    <!-- LOAN CALCULATOR -->
    <section class="tool-section" id="loan-calculator">
        <h2 style="text-align: center;">Loan Calculator</h2>
        <div class="calculator-wrapper">
            <div class="calculator">
                <h2><span class="soyo-logo">SOYOSOYO</span> SACCO Loan Calculator</h2>
                <div class="form-group">
                    <label for="loanType">Loan Type:</label>
                    <select id="loanType" onchange="updateFields()">
                        <option value="">Select Loan Type</option>
                        <option value="emergency">Emergency Loan</option>
                        <option value="medicare">Medicare Loan</option>
                        <option value="education">Education Loan</option>
                        <option value="development">Development Loan</option>
                        <option value="apiCulture">Api Culture Loan</option>
                    </select>
                </div>
                <div class="form-group interest-rate">
                    <label for="rate">Annual Interest Rate (%):</label>
                    <input type="text" id="rate" readonly placeholder="Select a loan type">
                </div>
                <div class="form-group tenure">
                    <label for="tenure">Tenure (Months):</label>
                    <input type="text" id="tenure" readonly placeholder="Select a loan type">
                </div>
                <div class="form-group">
                    <label for="principalAmount">Loan Amount (KES):</label>
                    <input type="number" id="principalAmount" min="0" max="1000000" step="0.01" value="10000" placeholder="e.g., 1250.50">
                </div>
                <button onclick="calculateLoan()">Calculate Loan</button>
                <div class="result" id="result"></div>

                <!-- Amortization Table -->
                <button onclick="toggleAmortizationTable()" id="amortizationButton" style="display: none; margin-top: 1rem;">View Amortization Table</button>
                <div class="amortization-table" id="amortizationTable" style="display: none; margin-top: 1rem;">
                    <table>
                        <thead>
                            <tr>
                                <th>Month</th>
                                <th>Payment (KES)</th>
                                <th>Principal (KES)</th>
                                <th>Interest (KES)</th>
                                <th>Balance (KES)</th>
                            </tr>
                        </thead>
                        <tbody id="amortizationBody"></tbody>
                    </table>
                </div>

                <!-- Fines Section -->
                <button onclick="showFinesSection()" id="finesPromptButton" style="display: none; margin-top: 1rem;">Calculate Fines for Missed Payments</button>
                <div class="fines-section" id="finesSection" style="display: none; margin-top: 1rem;">
                    <h3>Calculate Late Repayment Fines</h3>
                    <div class="form-group">
                        <label for="lateMonth">Month of First Missed Payment:</label>
                        <input type="number" id="lateMonth" placeholder="e.g., 1" min="1">
                    </div>
                    <div class="form-group">
                        <label for="monthsLate">Number of Consecutive Missed Payments:</label>
                        <input type="number" id="monthsLate" placeholder="e.g., 3" min="0">
                    </div>
                    <div class="form-group" id="paymentGroup" style="display: none;">
                        <label for="paymentMonth">Month to Add Payment:</label>
                        <input type="number" id="paymentMonth" placeholder="e.g., 4" min="1">
                        <label for="paymentAmount">Amount Paid (KES):</label>
                        <input type="number" id="paymentAmount" placeholder="e.g., 500" min="0">
                        <button onclick="addPayment()">Add Payment</button>
                    </div>
                    <button onclick="calculateFines()">Calculate Fines</button>
                    <div class="result" id="finesResult"></div>
                    <button onclick="toggleFinesAmortizationTable()" id="finesAmortizationButton" style="display: none; margin-top: 1rem;">View Amortization Table with Fines</button>
                    <div class="fines-amortization-table" id="finesAmortizationTable" style="display: none; margin-top: 1rem;">
                        <table>
                            <thead>
                                <tr>
                                    <th>Month</th>
                                    <th>Payment (KES)</th>
                                    <th>Principal (KES)</th>
                                    <th>Interest (KES)</th>
                                    <th>Installment Fine (KES)</th>
                                    <th>Outstanding Fine (KES)</th>
                                    <th>Balance (KES)</th>
                                </tr>
                            </thead>
                            <tbody id="finesAmortizationBody"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Chart -->
                <button onclick="toggleChart()" id="chartButton" style="display: none; margin-top: 1rem;">View Chart</button>
                <div class="loan-chart" id="loanChart" style="display: none; margin-top: 1rem; height: 300px;"></div>
            </div>
        </div>
    </section>

    <!-- DIVIDENDS CALCULATOR -->
    <section class="tool-section" id="dividends-calculator">
        <h2 style="text-align: center;">Dividends Calculator</h2>
        <div class="calculator">
            <div class="form-group">
                <label for="dividendRate">Dividend Rate (%):</label>
                <input type="number" id="dividendRate" placeholder="e.g., 12.5" step="0.01">
            </div>
            <div class="month-subheader">Enter your monthly savings contributions in the spaces below:</div>
            <div class="month-inputs">
                <input type="number" id="jan" placeholder="Jan" min="0" step="0.01">
                <input type="number" id="feb" placeholder="Feb" min="0" step="0.01">
                <input type="number" id="mar" placeholder="Mar" min="0" step="0.01">
                <input type="number" id="apr" placeholder="Apr" min="0" step="0.01">
                <input type="number" id="may" placeholder="May" min="0" step="0.01">
                <input type="number" id="jun" placeholder="Jun" min="0" step="0.01">
                <input type="number" id="jul" placeholder="Jul" min="0" step="0.01">
                <input type="number" id="aug" placeholder="Aug" min="0" step="0.01">
                <input type="number" id="sep" placeholder="Sep" min="0" step="0.01">
                <input type="number" id="oct" placeholder="Oct" min="0" step="0.01">
                <input type="number" id="nov" placeholder="Nov" min="0" step="0.01">
                <input type="number" id="dec" placeholder="Dec" min="0" step="0.01">
            </div>
            <button onclick="calculateDividend()">Calculate Dividend</button>
            <div class="result" id="dividendResult"></div>
        </div>
    </section>

    <!-- MEMBER ACTIVITIES CAROUSEL -->
    <section class="member-activities-section">
        <h2 style="text-align: center;">Member Activities</h2>
        <p style="text-align: center; margin-bottom: 1.5rem;">See what our members are up to.</p>
        <div class="member-activities-carousel">
            <div class="slides" id="memberSlides"></div>
            <button class="nav-btn prev" onclick="changeSlide(-1)">&#10094;</button>
            <button class="nav-btn next" onclick="changeSlide(1)">&#10095;</button>
            <div class="dots" id="memberDots"></div>
        </div>
    </section>

</main>

<!-- =================: FOOTER ‚Äì ICONS ONLY (LIKE OTHER PAGES) -->
<footer>
    <p>¬© 2025 SOYOSOYO SACCO. All rights reserved. | <a href="mailto:info@soyosoyosacco.com">info@soyosoyosacco.com</a></p>
    <div class="social-icons">
        <a href="https://www.facebook.com/people/Soyosoyo-Sacco/61565783836766/" target="_blank" aria-label="Facebook">
            <i class="fab fa-facebook-f"></i>
        </a>
        <a href="https://x.com/SoyosoyoSACCO" target="_blank" aria-label="Twitter">
            <i class="fab fa-twitter"></i>
        </a>
        <a href="https://www.instagram.com/soyosoyosacco" target="_blank" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
        </a>
    </div>
</footer>

<!-- ==================== SCRIPTS ==================== -->
<script src="./scripts/carousel.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

  <!-- 3D Projections Script -->
<script>
(function() {
    'use strict';

    // Wait for carousel data
    function waitForData(callback) {
        if (window.saccoData && window.saccoData.jan && window.saccoData.today) {
            callback();
        } else {
            setTimeout(() => waitForData(callback), 100);
        }
    }

    // Normalize data
    function normalizeData(data) {
        let roa = 0;
        if (typeof data.roa === 'string') {
            roa = parseFloat(data.roa.replace('%', ''));
        } else if (typeof data.roa === 'number') {
            roa = data.roa;
        }
        
        return {
            members: parseInt(data.members) || 0,
            contributions: parseInt(data.contributions) || 0,
            loans: parseInt(data.loans) || 0,
            bankBalance: parseInt(data.bankBalance) || 0,
            profit: parseInt(data.profit) || 0,
            roa: roa
        };
    }

    // CONSERVATIVE projection algorithm
    function generateProjections(startData, endData, years = [2025, 2026, 2027, 2028, 2029], smoothing = 0.45) {
        const start = normalizeData(startData);
        const end = normalizeData(endData);
        const projections = [];
        
        const membersGrowth = start.members > 0 ? (end.members - start.members) / start.members : 0;
        const contributionsGrowth = start.contributions > 0 ? (end.contributions - start.contributions) / start.contributions : 0;
        
        // CONSERVATIVE LOAN GROWTH - Cap at 20% of actual or 15% annually
        const actualLoansGrowth = start.loans > 0 ? (end.loans - start.loans) / start.loans : 0;
        const loansGrowth = Math.min(actualLoansGrowth * 0.2, 0.15);
        
        const bankGrowth = start.bankBalance > 0 ? (end.bankBalance - start.bankBalance) / start.bankBalance : 0;

        let last = { ...end };

        years.forEach((year, idx) => {
            if (idx === 0) {
                projections.push({ 
                    year, 
                    members: end.members,
                    contributions: end.contributions,
                    loans: end.loans,
                    bankBalance: end.bankBalance,
                    profit: end.profit,
                    roa: end.roa
                });
            } else {
                const members = Math.round(last.members * (1 + membersGrowth * smoothing));
                const contributions = Math.round(last.contributions * (1 + contributionsGrowth * smoothing));
                const loans = Math.round(last.loans * (1 + loansGrowth * smoothing));
                const bankBalance = Math.round(last.bankBalance * (1 + bankGrowth * smoothing));
                
                const totalAssets = loans + contributions + bankBalance;
                const roaDecimal = last.roa / 100;
                const profit = Math.round(roaDecimal * totalAssets);

                projections.push({ 
                    year, members, contributions, loans, bankBalance, profit,
                    roa: parseFloat(last.roa.toFixed(2))
                });
                
                last = { members, contributions, loans, bankBalance, profit, roa: last.roa };
            }
        });

        return projections;
    }

    // Format currency
    function formatCurrency(num) {
        if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
        if (num >= 1000) return (num / 1000).toFixed(0) + 'K';
        return num.toLocaleString();
    }

    // Create 3D pyramid for each year
    function createPyramid(year, value, maxValue, xOffset, color1, color2) {
        const height = (value / maxValue) * 3; // Scale height
        const baseSize = 0.8;
        
        // Define vertices: square base + apex
        const x = [
            xOffset - baseSize, xOffset + baseSize, xOffset + baseSize, xOffset - baseSize, xOffset
        ];
        const y = [
            -baseSize, -baseSize, baseSize, baseSize, 0
        ];
        const z = [
            0, 0, 0, 0, height
        ];

        return {
            type: 'mesh3d',
            x: x,
            y: y,
            z: z,
            i: [0, 0, 1, 2, 0, 1],  // Triangle faces
            j: [1, 3, 2, 3, 1, 2],
            k: [4, 4, 4, 4, 3, 3],
            intensity: [0, 0, 0, 0, 1],
            colorscale: [[0, color1], [1, color2]],
            name: `${year}: ${formatCurrency(value)}`,
            hovertemplate: `<b>${year}</b><br>Total Assets: ${formatCurrency(value)}<extra></extra>`,
            showscale: false,
            opacity: 0.85,
            flatshading: false
        };
    }

    // Create stunning 3D funnel chart with pyramids
    function create3DFunnelChart(projections) {
        const pyramids = [];
        const colors = [
            ['#FF6B9D', '#C44569'],  // 2025 - Pink gradient
            ['#4FACFE', '#00F2FE'],  // 2026 - Blue gradient
            ['#43E97B', '#38F9D7'],  // 2027 - Green gradient
            ['#FA709A', '#FEE140'],  // 2028 - Orange gradient
            ['#30CFD0', '#330867']   // 2029 - Purple gradient
        ];

        // Calculate total assets for each year
        const totalAssets = projections.map(p => p.contributions + p.loans + p.bankBalance);
        const maxAsset = Math.max(...totalAssets);

        // Create pyramid for each year
        projections.forEach((proj, idx) => {
            const pyramid = createPyramid(
                proj.year,
                totalAssets[idx],
                maxAsset,
                idx * 2.5, // Spread pyramids horizontally
                colors[idx][0],
                colors[idx][1]
            );
            pyramids.push(pyramid);
        });

        const layout = {
            title: {
                text: '<b>3D Growth Funnel: Conservative 5-Year Assets Projection</b>',
                font: { size: 24, family: 'Arial, sans-serif', color: '#333' }
            },
            scene: {
                xaxis: { 
                    title: 'Year Progression', 
                    backgroundcolor: 'rgb(245, 245, 245)', 
                    gridcolor: 'white', 
                    showbackground: true,
                    tickvals: [0, 2.5, 5, 7.5, 10],
                    ticktext: projections.map(p => p.year)
                },
                yaxis: { 
                    title: 'Growth Dimension', 
                    backgroundcolor: 'rgb(245, 245, 245)', 
                    gridcolor: 'white', 
                    showbackground: true 
                },
                zaxis: { 
                    title: 'Total Assets (KES)', 
                    backgroundcolor: 'rgb(245, 245, 245)', 
                    gridcolor: 'white', 
                    showbackground: true 
                },
                camera: {
                    eye: { x: 1.8, y: 1.8, z: 1.4 },
                    center: { x: 0, y: 0, z: 0 }
                }
            },
            margin: { l: 0, r: 0, b: 0, t: 60 },
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(0,0,0,0)',
            showlegend: true,
            legend: {
                x: 0.05,
                y: 0.95,
                bgcolor: 'rgba(255,255,255,0.9)',
                bordercolor: '#E2E2E2',
                borderwidth: 2,
                font: { size: 11 }
            }
        };

        const config = {
            responsive: true,
            displayModeBar: true,
            displaylogo: false,
            modeBarButtonsToRemove: ['toImage']
        };

        Plotly.newPlot('premium3DChart', pyramids, layout, config);
        console.log('‚úÖ Premium 3D Pyramid Funnel Chart Created');
    }

    // Create premium metric cards
    function createPremiumMetricCards(projections) {
        const container = document.getElementById('metricsPremiumGrid');
        const firstYear = projections[0];
        const lastYear = projections[projections.length - 1];

        const metrics = [
            {
                label: 'Members Growth',
                current: firstYear.members,
                projected: lastYear.members,
                color1: '#FF6B9D',
                color2: '#C44569'
            },
            {
                label: 'Contributions Growth',
                current: firstYear.contributions,
                projected: lastYear.contributions,
                color1: '#4FACFE',
                color2: '#00F2FE'
            },
            {
                label: 'Loans Growth (Conservative)',
                current: firstYear.loans,
                projected: lastYear.loans,
                color1: '#43E97B',
                color2: '#38F9D7'
            },
            {
                label: 'Bank Balance Growth',
                current: firstYear.bankBalance,
                projected: lastYear.bankBalance,
                color1: '#FA709A',
                color2: '#FEE140'
            }
        ];

        const cardsHTML = metrics.map(metric => {
            const growth = metric.current > 0 
                ? ((metric.projected - metric.current) / metric.current * 100).toFixed(1)
                : '‚àû';
            const isCurrency = !metric.label.includes('Members');
            
            return `
                <div class="metric-premium-card" style="--card-color-1: ${metric.color1}; --card-color-2: ${metric.color2};">
                    <h4>${metric.label}</h4>
                    <div class="metric-value-premium">
                        <span class="metric-label-premium">2025:</span>
                        <strong class="metric-number-premium">${isCurrency ? formatCurrency(metric.current) : metric.current}</strong>
                    </div>
                    <div class="metric-value-premium">
                        <span class="metric-label-premium">2029:</span>
                        <strong class="metric-number-premium">${isCurrency ? formatCurrency(metric.projected) : metric.projected}</strong>
                    </div>
                    <div class="growth-badge-premium">
                        <div class="growth-percentage-premium">+${growth}%</div>
                        <div class="growth-text-premium">Conservative Growth</div>
                    </div>
                </div>
            `;
        }).join('');

        container.innerHTML = cardsHTML;
    }

    // Initialize
    function initPremium3DProjections() {
        waitForData(() => {
            try {
                const { jan, today } = window.saccoData;
                const projections = generateProjections(jan, today);
                console.log('üìä Conservative 5-Year Projections:', projections);
                
                window.projections = projections;
                create3DFunnelChart(projections);
                createPremiumMetricCards(projections);
            } catch (error) {
                console.error('‚ùå Error generating premium 3D projections:', error);
            }
        });
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPremium3DProjections);
    } else {
        initPremium3DProjections();
    }

    window.refreshPremium3DProjections = initPremium3DProjections;
})();
</script>  
    
   
 <script src="./scripts/member-carousel.js"></script>
 <script>   
 // CLEAN GROWTH ARROW PLUGIN
    const cleanGrowthArrowPlugin = {
        id: 'cleanGrowthArrow',
        afterDraw: function(chart) {
            const { ctx, scales, data } = chart;
            const dataset = data.datasets[0];
            const janVal = dataset.data[0];
            const todayVal = dataset.data[1];
            const growthPercent = janVal === 0 ? 0 : ((todayVal - janVal) / Math.abs(janVal)) * 100;
            const isPositive = growthPercent > 0;

            const xScale = scales.x;
            const yScale = scales.y;

            const x1 = xScale.getPixelForValue(0);
            const x2 = xScale.getPixelForValue(1);
            const y1 = yScale.getPixelForValue(janVal);
            const y2 = yScale.getPixelForValue(todayVal);

            const headLength = 14;
            const angle = Math.atan2(y2 - y1, x2 - x1);

            const color = isPositive ? '#10B981' : '#EF4444';

            ctx.save();
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(x2, y2);
            ctx.lineTo(x2 - headLength * Math.cos(angle - Math.PI / 6), y2 - headLength * Math.sin(angle - Math.PI / 6));
            ctx.lineTo(x2 - headLength * Math.cos(angle + Math.PI / 6), y2 - headLength * Math.sin(angle + Math.PI / 6));
            ctx.closePath();
            ctx.fillStyle = color;
            ctx.fill();

            if (growthPercent !== 0) {
                const midX = (x1 + x2) / 2;
                const midY = (y1 + y2) / 2 - 15;
                ctx.font = 'bold 13px Lato';
                ctx.fillStyle = color;
                ctx.textAlign = 'center';
                ctx.fillText(`${isPositive ? '+' : ''}${growthPercent.toFixed(1)}%`, midX, midY);
            }
            ctx.restore();
        }
    };
    Chart.register(cleanGrowthArrowPlugin);

    // CHART RENDERER
    function renderGrowthCharts() {
        if (!window.saccoData) {
            console.warn('saccoData not ready. Retrying...');
            setTimeout(renderGrowthCharts, 100);
            return;
        }

        console.log('SACCO DATA LOADED:', window.saccoData);

        const { jan, today } = window.saccoData;
        const colors = {
            members: { jan: '#8B5CF6', today: '#C4B5FD' },
            loans: { jan: '#F59E0B', today: '#FBBF24' },
            contributions: { jan: '#10B981', today: '#34D399' },
            profit: { jan: '#EF4444', today: '#F87171' },
            roa: { jan: '#0EA5E9', today: '#7DD3FC' },
            liquidity: { jan: '#6366F1', today: '#A5B4FC' }
        };

        const growth = (j, t) => j === 0 ? (t === 0 ? 0 : 100) : ((t - j) / Math.abs(j)) * 100;

        const updateIndicator = (id, g) => {
            const el = document.getElementById(id);
            const arrow = g > 0 ? 'up' : g < 0 ? 'down' : 'right';
            const cls = g > 0 ? 'positive' : g < 0 ? 'negative' : '';
            el.innerHTML = `<i class="fas fa-arrow-${arrow}"></i> ${Math.abs(g).toFixed(1)}%`;
            el.className = `growth-indicator ${cls}`;
        };

        const createChart = (id, j, t, label, color, gid, isPercent = false, isMoney = false) => {
            const g = growth(j, t);
            updateIndicator(gid, g);

            new Chart(document.getElementById(id).getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['Jan 2025', 'Today'],
                    datasets: [{
                        data: [j, t],
                        backgroundColor: [color.jan, color.today],
                        borderRadius: 10,
                        maxBarThickness: 60
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: { 
                                label: ctx => {
                                    const val = ctx.raw;
                                    if (isPercent) return val.toFixed(2) + '%';
                                    if (isMoney) return 'KES ' + val.toLocaleString();
                                    return val.toLocaleString();
                                }
                            }
                        },
                        datalabels: {
                            anchor: 'end',
                            align: 'top',
                            color: '#1a1a1a',
                            font: { weight: '900', size: 14 },
                            formatter: v => {
                                if (isPercent) return v.toFixed(2) + '%';
                                if (isMoney) return 'KES ' + v.toLocaleString();
                                return v.toLocaleString();
                            },
                            backgroundColor: 'rgba(255, 255, 255, 0.95)',
                            borderRadius: 6,
                            padding: 7
                        }
                    },
                    scales: {
                        x: { grid: { display: false }, ticks: { color: '#1a1a1a', font: { weight: 'bold', size: 13 } } },
                        y: { display: false, beginAtZero: true }
                    },
                    layout: { padding: { top: 50, left: 8, right: 8 } }
                },
                plugins: [ChartDataLabels]
            });
        };

        // Use pre-calculated ROA from saccoData (includes external loans)
        const janROA = parseFloat(jan.roa);
        const todayROA = parseFloat(today.roa);

        // Liquidity: √ó100 (as before)
        const janLiquidity = jan.contributions > 0 ? (jan.bankBalance / jan.contributions) * 100 : 0;
        const todayLiquidity = today.contributions > 0 ? (today.bankBalance / today.contributions) * 100 : 0;

        console.log('ROA:', janROA.toFixed(2) + '% ‚Üí', todayROA.toFixed(2) + '%');

        createChart('chartMembers', jan.members, today.members, 'Members', colors.members, 'growthMembers');
        createChart('chartLoans', jan.loans, today.loans, 'Loans (KES)', colors.loans, 'growthLoans', false, true);
        createChart('chartContributions', jan.contributions, today.contributions, 'Contributions (KES)', colors.contributions, 'growthContributions', false, true);
        createChart('chartProfit', jan.profit, today.profit, 'Profit (KES)', colors.profit, 'growthProfit', false, true);
        createChart('chartROA', janROA, todayROA, 'ROA (%)', colors.roa, 'growthROA', true);
        createChart('chartLiquidity', janLiquidity, todayLiquidity, 'Liquidity Ratio (%)', colors.liquidity, 'growthLiquidity', true);

        // Render Loan Types Distribution Pie Chart (with custom legend including percentages)
        if (window.loanTypes && window.loanTypes.length > 0) {
            const totalLoans = window.loanTypes.reduce((sum, loan) => sum + loan.value, 0);
            if (totalLoans > 0) {
                const labels = window.loanTypes.map(loan => loan.name);
                const data = window.loanTypes.map(loan => (loan.value / totalLoans) * 100);
                const loanColors = ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0']; // Colors for Emergency, Medicare, Development, Education

                new Chart(document.getElementById('chartLoanTypes').getContext('2d'), {
                    type: 'pie',
                    data: {
                        labels: labels,
                        datasets: [{
                            data: data,
                            backgroundColor: loanColors,
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                position: 'bottom',
                                labels: {
                                    generateLabels: function(chart) {
                                        const data = chart.data;
                                        if (data.labels.length && data.datasets.length) {
                                            return data.labels.map((label, i) => {
                                                const value = data.datasets[0].data[i];
                                                const percentage = value.toFixed(1) + '%';
                                                return {
                                                    text: `${label}: ${percentage}`,
                                                    fillStyle: data.datasets[0].backgroundColor[i],
                                                    strokeStyle: data.datasets[0].borderColor ? data.datasets[0].borderColor[i] : data.datasets[0].backgroundColor[i],
                                                    lineWidth: data.datasets[0].borderWidth,
                                                    hidden: false,
                                                    index: i
                                                };
                                            });
                                        }
                                        return [];
                                    },
                                    font: { size: 12, weight: 'bold' },
                                    padding: 20,
                                    usePointStyle: true
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: ctx => `${ctx.label}: ${ctx.parsed.toFixed(1)}%`
                                }
                            },
                            datalabels: {
                                formatter: (value) => value > 5 ? value.toFixed(1) + '%' : '',  // Only show if >5%
                                color: '#fff',
                                font: { weight: 'bold', size: 12 },
                                anchor: 'center',
                                align: 'center'
                            }
                        }
                    },
                    plugins: [ChartDataLabels]
                });
            } else {
                console.warn('Total loans is 0; skipping loan types chart.');
            }
        } else {
            console.warn('loanTypes data not available; skipping loan types chart.');
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        renderGrowthCharts();
        initMemberCarousel();  // Initialize member carousel
        if (typeof updateFields === 'function') updateFields();
        if (typeof updateSliderValue === 'function') updateSliderValue('principal');
    });
</script>

<script src="./scripts/main.js"></script>
<script src="./scripts/calculator.js"></script>
<script src="./scripts/dividendscalculator.js"></script>
<script src="./scripts/chatbot.js"></script>
<script src="./scripts/seo.js"></script>

<!-- SCHEMA.ORG -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FinancialService",
  "name": "SOYOSOYO SACCO",
  "url": "https://soyosoyosacco.com",
  "logo": "https://soyosoyosacco.com/assets/141dd3faa98da9737b591161deac509a.jpg",
  "description": "Affordable 1% monthly loans and high dividends in Coastal Kenya.",
  "address": { "@type": "PostalAddress", "addressLocality": "Kilifi", "addressRegion": "Coast", "addressCountry": "KE" },
  "email": "info@soyosoyosacco.com",
  "areaServed": ["Kilifi", "Mombasa", "Kwale"]
}
</script>

</body>
</html>
